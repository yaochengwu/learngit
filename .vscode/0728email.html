<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="0809email.css" />
    <script src="main.js"></script>
</head>

<body>
    <div class="wrapper">
        <input id="email-input" type="text">
        <ul id="email-sug-wrapper" class="email-sug"></ul>
    </div>

    <script>
        var postfixList = ['163.com', 'gmail.com', '126.com', 'qq.com', '263.net'];
        var inp = document.getElementById("email-input");
        var list = document.getElementById("email-sug-wrapper");

        inp.oninput = function inputDom() {
            out();
            hs();
        }

        function inpv() {
            var inpval = inp.value;
            inpval = inpval.replace(/\s/g, "");
            return inpval;
        }

        function out() {
            var val = inpv();
            list.innerHTML = "";

            if (val.indexOf("@") != -1) {
                var mval = val.substring(val.indexOf("@") + 1);
                val = val.slice(0, val.indexOf("@"));

                for (i = 0; i < postfixList.length; i++) {
                    if (postfixList[i].indexOf(mval) != -1) {
                        var nval = val + "@" + postfixList[i];
                        var addli = document.createElement("li");
                        var addnode = document.createTextNode(nval);
                        addli.appendChild(addnode);
                        list.appendChild(addli);
                    }
                }
                if (list.innerHTML = "") {
                    for (i = 0; i < postfixList.length; i++) {
                        var nval = val + "@" + postfixList[i];
                        var addli = document.createElement("li");
                        var addnode = document.createTextNode(nval);
                        addli.appendChild(addnode);
                        list.appendChild(addli);
                    }
                }
            }
            else {
                for (i = 0; i < postfixList.length; i++) {
                    var nval = val + "@" + postfixList[i];
                    var addli = document.createElement("li");
                    var addnode = document.createTextNode(nval);
                    addli.appendChild(addnode);
                    list.appendChild(addli);
                }
            }


        }





        function hs() {
            var val = inpv();
            if (val != "") {
                show();
            } else {
                hidd();
            }
        }

        function hidd() {
            list.style.display = "none";
        }

        function show() {

            list.style.display = "block";
        }
    </script>
</body>

</html>